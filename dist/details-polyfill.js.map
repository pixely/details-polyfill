{"version":3,"sources":["details-polyfill.js"],"names":[],"mappings":";;;;;;AAAA;;;;;;kBAMgB,SAAS,OAAT,GAAmB;AACjC;AACA,MAAM,qBAAsB,UAAU,SAAS,aAAT,CAAuB,SAAvB,CAAtC;;AAEA;AACA;AACA,MAAM,0rCAAN;;AA8CA;AACA;AACA,MAAM,eAAe,SAAf,YAAe,GAAM;AACzB,QAAM,QAAQ,SAAS,aAAT,CAAuB,OAAvB,CAAd;AACA,UAAM,EAAN,GAAW,sBAAX;AACA,UAAM,WAAN,GAAoB,IACf,OADe,CACP,kCADO,EAC6B,EAD7B,EAEf,OAFe,CAEP,MAFO,EAEC,GAFD,CAApB;AAGA,UAAM,WAAN,CAAkB,SAAS,cAAT,CAAwB,EAAxB,CAAlB;;AAEA;AACA,aAAS,IAAT,CAAc,YAAd,CAA2B,KAA3B,EAAkC,SAAS,IAAT,CAAc,UAAhD;AACA,WAAO,IAAP;AACD,GAXD;;AAaA,MAAM,aAAa,SAAS,UAAT,GAAsB;AACvC,QAAM,SAAS,KAAK,UAApB;;AAEA,QAAI,OAAO,OAAP,CAAe,WAAf,OAAiC,SAArC,EAAgD;AAC9C,UAAI,OAAO,YAAP,CAAoB,MAApB,CAAJ,EAAiC;AAC/B,eAAO,eAAP,CAAuB,MAAvB;AACD,OAFD,MAEO;AACL,eAAO,YAAP,CAAoB,MAApB,EAA4B,EAA5B;AACD;AACF;AACF,GAVD;;AAYA,MAAI,kBAAJ,EAAwB;AACtB;AACD;;AAED;AACA,WAAS,eAAT,CAAyB,SAAzB,CAAmC,GAAnC,CAAuC,YAAvC;;AAEA;AACA;;AAEA;AACA,MAAM,YAAY,SAAS,gBAAT,CAA0B,SAA1B,CAAlB;AACA,MAAI,gBAAJ;;AAEA;AACA;AACA,MAAI,SAAJ,EAAe;AAAA;AAAA;AAAA;;AAAA;AACb,2BAAgB,SAAhB,8HAA2B;AAAtB,eAAsB;;AACzB,gBAAQ,YAAR,CAAqB,MAArB,EAA6B,QAA7B;AACA,gBAAQ,YAAR,CAAqB,UAArB,EAAiC,CAAjC;AACA,gBAAQ,gBAAR,CAAyB,OAAzB,EAAkC,UAAlC;AACA,gBAAQ,gBAAR,CAAyB,UAAzB,EAAqC,UAAC,CAAD,EAAO;AAC1C,cAAM,MAAM,EAAE,KAAF,IAAW,EAAE,OAAzB;AACA,cAAI,QAAQ,EAAR,IAAc,QAAQ,EAA1B,EAA8B;AAAE;AAC9B,uBAAW,KAAX,CAAiB,EAAE,MAAnB;AACD;AACF,SALD;AAMD;AAXY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAYd;AACF,CA5Ge","file":"details-polyfill.js","sourcesContent":["/**\n * Add support for details element for browsers which require it\n *\n * @author Graham Martin <graham@pixely.co.uk>\n */\n\nexport default (function Details() {\n  // Check for details element support\n  const isDetailsSupported = ('open' in document.createElement('details'));\n\n  // CSS used a lightly modified version of work by @jordanaustin\n  // https://github.com/jordanaustin/Details-Expander/blob/master/src/css/main.css\n  const css = `  \n    /*\n      NOTE:\n      These are defaults meant to mimic the default unstyled brower look.\n      I highly recommend you style your details tags but don't do it here.\n      Just overwrite the style. Almost everything can be fully customized.\n      Anything that shouldn't be overwritten has an !important on it.\n    */\n    \n    .no-details details {\n      display: block;\n      width: 100%;\n    }\n    \n    .no-details details > summary {\n      display: inline-block !important;\n      width: 100%  !important;\n      min-height: 1.4em;\n      padding: 0.125em;\n      cursor: pointer;\n    }\n    \n    .no-details details summary:before {\n      content:'►';\n      font-size: 0.8em;\n      position: relative;\n      display: inline-block;\n      width: 1em;\n      height: 1em;\n      margin-right: 0.3em;\n      transform-origin: 0.4em 0.6em;\n    }\n    \n    .no-details details[open] > summary:before {\n      content: '▼';\n    }\n    \n    .no-details details > *:not(summary) {\n      display: none;\n    }\n    \n    .no-details details[open] > *:not(summary) {\n      /* If you need to display table or something like that feel free */\n      display: block;\n    }`;\n\n  // injectStyles is based on work by @leifoolsen\n  // https://github.com/leifoolsen/lavu-details-polyfill/blob/master/src/index.js\n  const injectStyles = () => {\n    const style = document.createElement('style');\n    style.id = 'details-polyfill-css';\n    style.textContent = css\n        .replace(/(\\/\\*([^*]|(\\*+[^*\\/]))*\\*+\\/)/gm, '')\n        .replace(/\\s/gm, ' ');\n    style.appendChild(document.createTextNode(''));\n\n    // Must be the first stylesheet so it does not override user css\n    document.head.insertBefore(style, document.head.firstChild);\n    return true;\n  };\n\n  const toggleOpen = function toggleOpen() {\n    const parent = this.parentNode;\n\n    if (parent.tagName.toLowerCase() === 'details') {\n      if (parent.hasAttribute('open')) {\n        parent.removeAttribute('open');\n      } else {\n        parent.setAttribute('open', '');\n      }\n    }\n  };\n\n  if (isDetailsSupported) {\n    return;\n  }\n\n  // Add class to <html> element to hook our styles too\n  document.documentElement.classList.add('no-details');\n\n  // Inject basic details styling\n  injectStyles();\n\n  // Grab references to the detail DOM elements\n  const summaries = document.querySelectorAll('summary');\n  let summary;\n\n  // Iterate over all summary elements, set accessibility focused attributes and\n  // set event listeners for clicks or keypresses\n  if (summaries) {\n    for (summary of summaries) {\n      summary.setAttribute('role', 'button');\n      summary.setAttribute('tabindex', 0);\n      summary.addEventListener('click', toggleOpen);\n      summary.addEventListener('keypress', (e) => {\n        const key = e.which || e.keyCode;\n        if (key === 13 || key === 32) { // enter or space keys\n          toggleOpen.apply(e.target);\n        }\n      });\n    }\n  }\n}());\n"],"sourceRoot":"/source/"}